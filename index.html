<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Village</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/bulma-prefers-dark" />
    <link rel="stylesheet" href="css/main.css"/>
    <script src="js/main.js" type="module" async></script>

</head>

<body>
<div id="landing">
    <section class="section">

            <h1 class="title">
                Village: An Internet OS.
            </h1>
            <p class="subtitle">
                Change the code, change the world.
            </p>

    </section>

    <section class="hero is-medium is-link">
        <div class="hero-body">
            <section class="container">
                <p class="block is-size-3"> Ready to join peer-to-peer?</p>

                <button id="btn_start" class="button is-primary is-large" >Bring me in!</button>
            </section>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="content">
                <h3>What is Village?</h3>

                <p>Village is a fully decentralized peer-to-peer network living in web browsers.  Once you join the network
                    and connect to your peers, all the content in your web page is served by your peers.  Servers are not
                    used except to facilitate the very first time you connect to the network.
                </p>

                <h3>How is Village built?</h3>

                <p>Village is coded by its users.  When an improvement is proposed, users decide whether they want to use it
                    or reject it.  This makes village continue improving.  Have an idea to improve Village?  Code it up and
                    share it with the Village!
                </p>

                <h3>What tools are required to code Village components?</h3>

                <p>Village can be coded directly in the web browser - no special tools needed.  You can start coding Village
                today with just simple Javascript</p>

                <h3>Where is the Village data stored?</h3>

                <p>Village data is stored in the web browser's cache.  When new data enters the network, it is shared and
                stored amongst peers as backup</p>
            </div>
        </div>
    </section>
</div>
<div id="osView" class="is-hidden">
    <div id="appContainer"></div>

    <div id="connectedView" class="is-hidden">
        <div class="tile is-ancestor">
            <div class="tile is-vertical is-8">
                <div class="tile">
                    <div class="tile is-parent is-vertical">
                        <article class="tile is-child notification is-primary">
                            <div id="appListContainer"></div>
                        </article>
                        <article class="tile is-child notification is-warning">
                            <p class="title">Status</p>
                            <p class="subtitle">Connection State</p>
                            <div id="connstate"></div>
                        </article>
                    </div>
                    <div class="tile is-parent">
                        <article class="tile is-child notification is-info">
                            <div id="chatContainer"></div>
                        </article>
                    </div>
                </div>
                <div class="tile is-parent">
                    <article class="tile is-child notification is-danger">
                        <p class="title">Invite peer</p>
                        <div class="is-flex is-flex-direction-row">
                            <section class="section is-medium">
                                <p class="subtitle">Invite Peer</p>
                                <div class="is-size-6" id="inviteLink"></div>
                                <input type="text" id="acceptOfferInput" placeholder="offer">
                            </section>
                            <section class="section is-medium">
                                <p class="subtitle">Accept Peer</p>
                                <input type="text" id="acceptLinkInput">
                                <div id="acceptOffer"></div>
                            </section>
                        </div>
                    </article>
                </div>
            </div>
            <div class="tile is-parent">
                <article class="tile is-child notification is-success">
                    <div id="editorContainer"></div>
                </article>
            </div>
        </div>
    </div>

    <div style="margin: auto; width: 80%;">
        <iframe sandbox="allow-popups allow-scripts allow-popups-to-escape-sandbox allow-modals"
                height="100" width="100%" src="about:blank" name="appIframe"
                id="appIframe" srcdoc="<!DOCTYPE html>
            <html>
            <head>
                <script>
                    window.addEventListener('message', (event) => {
                      const data = event.data;
                      if(data) {
                        if(data.run) {
                            eval(data.run);
                        }
                      }
                    }, false);
                </script>
            </head>
            </html>">

        </iframe>
        <br />
    </div>

</div>
</body>
</html>
